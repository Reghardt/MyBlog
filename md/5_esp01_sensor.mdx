export const title = "Building a IOT Temperature and Humidity Sensor";
export const date = "17 Jul 2023";
export const peek = "";
export const published = false;


# {title}

About 2 years ago, when I started playing around with electronics to build a water tank refill system, I decided to experiment with sending data over wifi between Arduinos.
I bought an ESP 07 to use as a wifi module for an arduino,
but when it arrived I was unpleasantly surprised that its pin spacing was smaller than that found on a breadboard (2mm vs 2.54mm).
Being unexperienced and overly cautious I did not want to solder anything to it to adapt it to 2.54mm for fear of breaking it. That is where I left it until recently.

After finishing the Water Tank Refill System (without wireless capabilities) I decided to explore wifi connectivity once more for a potential future version of the system.

This time I bought 2 ESP01 wifi modules as they have easy to use 2.54 mm pins out of the box.

Little did I know I was going down an amazingly interesting yet challenging rabbit hole that by the end expanded my knowledge, skills and interest in electronics considerably.

### Trying to use the ESP 01

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/esp_01.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/esp_01.jpg)

The ESP 01 (pictured above) can be controlled with an arduino by sending it 'AT' commands. Theres a bunch of them. 
They are used to tell the ESP to connect to wifi, set its mode, send data, enter deep sleep and so on.

I wired the module up to my Arduino, but for the life of me I could not get the AT commands to work.

Doing some research I found out that some ESP 01s might not have the correct firmware installed by default.
Thats interesting... So what exactly do they mean by firmware?

Turns out the ESP can actually be programmed and used as a micro controller, just like an arduino, and with the arduino framework!
Not only that but I was astonished to find out that it has a faster processor, more ram and more storage than an Arduino!
The biggest drawback was that it only has a handful of GPIO pins where as the Arduino has 36.

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/primative_programming.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/primative_programming.jpg)

Following a tutorial I again wired up the ESP to the arduino but this time with the intent to program it and use it as a dedicated micro controller. I wanted to see what it was capable of.

So why is it still wired up to the arduino?
In the above photo you can see that the ESP is considerably smaller than an arduino, and as such it does not have a dedicated USB port that can be used to program it.
This is where the arduino comes in. The arduino lends its USB port to the ESP, acting as a bridge between it and the computer, allowing us to program the ESP.

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/breakout_top.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/breakout_top.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/breakout_bottom.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/breakout_bottom.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/breakout_usage.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/breakout_usage.jpg)

It was not easy to use the ESP effectively when there was all these loose wires all over the place. 
To fix that I decided to try and make a breakout board for the ESP. The result of which you can see in the above 3 images.

It is not exactly masterful work but it does its job; hiding the wires and making it much easier and less error prone to work with the ESP.

This breakout board can now simply slide into an arduino, and the ESP into that. Easy and simple.

On closer inspection you will notice a button and switch on the breakout board. The switch indicates to the ESP in which mode it should be, ie Flash or Run mode.
The button is then pressed to restart the ESP and enter the indicated mode.
Imagine a settings page where you change something and then you have to hit save to apply it. It is basically the same idea.

Additionally I added some pin sockets to easily access the ESP's pins, these being RX, TX, GPIO 0, GPIO 2, 5V, 3.3V and GND.



[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/lcd_testing.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/lcd_testing.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/oled_with_time.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/oled_with_time.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/big_oled_with_time.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/big_oled_with_time.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/pcb_top.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/pcb_top.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/pcb_bottom.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/pcb_bottom.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/blender_internal.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/blender_internal.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/blender_external.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/blender_external.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/pcb_inserted.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/pcb_inserted.jpg)


[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/test_fitting_components.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/test_fitting_components.jpg)


[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/case_with_sensor.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/case_with_sensor.jpg)

[![The add in](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/finished_building.jpg)](https://remblog.s3.af-south-1.amazonaws.com/5_esp_01_sensor/finished_building.jpg)


