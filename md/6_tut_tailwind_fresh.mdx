export const title = "Tutorial: Real Tailwind with full intellisense support in Fresh JS";
export const date = "17 Jul 2023";
export const peek = "";
export const published = false;

# {title}

### What we'll do:
Add Tailwind (not Twind) to Fresh JS, with fully operational intellisense that includes autocomplete, syntax highlighting, and linting.
Tailwind CSS plugins like Typography and Daisy UI can also be used with this setup.
Optionally we will add Tailwind Auto Class Sorting with Prettier.

### How it works:



Create a new Fresh project by running:

~~~ powershell 
    deno run -A -r https://fresh.deno.dev
~~~

Give it a name.  
Select "Yes" when it askes if you would like to use Tailwind CSS.  
This isn't Tailwind thought, it's TWind. This step is to show you how to replace TWind if your project already uses it.

Yes for VS code, that's the editor I am using. (This tutorial has not been tested with other editors)

Open your Fresh project folder in VS Code.

Go to View > Command Pallette and run "Deno Initialize Workspace Configuration".
Select Yes (we will change this later)

Open "deno.json" and the following lines:

~~~ json
    //deno.json
    {
        "twind": "https://esm.sh/twind@0.16.19",
        "twind/": "https://esm.sh/twind@0.16.19/",
    }
~~~

Next open "main.ts" and do the following:

~~~ ts
    // delete below two lines
    import twindPlugin from "$fresh/plugins/twind.ts";
    import twindConfig from "./twind.config.ts";

    //change this:
    await start(manifest, { plugins: [twindPlugin(twindConfig)] });
    //to this:
    await start(manifest);
~~~

Finaly delete "twind.config.js".


Create a "tailwind.config.js" file in the root and copy the below into it:

~~~ js
    /** @type {import('tailwindcss').Config} */
    module.exports = {
        content: ["./routes/**/*.tsx", "./islands/**/*.tsx", "./components/**/*.tsx"],
        theme: {
        extend: {},
        },
        plugins: [require("@tailwindcss/typography")],
    };
~~~

You can remove the typography plugin if you dont want to use it.
The type import line will give you a error. We'll fix that soon.

Run "npm init", give it any name and keep on pressing enter till the end.  

run the following command:

~~~ powershell 
    npm i -D tailwindcss @tailwindcss/typography prettier prettier-plugin-tailwindcss
~~~

note: update .gitignore to exclude node_modules

Open "tailwind.config.js" and change the type import:

~~~ js
    /** @type {import('tailwindcss').Config} */
    //to
    /** @type {import('./node_modules/tailwindcss/types/config.d.ts').Config} */
~~~

That should fix the import error from before.

Assuming you have the Tailwind CSS IntelliSense plugin installed you can already see the Intellisense working if you hover ovver a taiwlind class in "index.tsx".
But tailwind itself isn't working yet, we will do that next.


Create a "css" folder in the "static" folder of Fresh.
In "css", create 2 files, "index.css" and "tailwind.css".

Open "index.css" and paste the following inside:

~~~ css 
    /* index.css */
    @tailwind base;
    @tailwind components;
    @tailwind utilities;
~~~

In the "routes" folder create a file called "_app.tsx".  
Copy the below content into it:

~~~ tsx
    // _app.tsx
    import { AppProps } from "$fresh/server.ts";
    import { Head, asset } from "$fresh/runtime.ts";

    export default function App({ Component }: AppProps) {
    return(
            <html>
                <Head>
                    <link 
                        href={asset("/css/twailwind.css")} 
                        rel="stylesheet" 
                    />          
                </Head>
                <body>
                    <Component />
                </body>
            </html>
        );
    }
~~~

Open "deno.json".
Modify the start task so it looks like:
~~~ json
    // deno.json 
    {
        "start": "npx tailwindcss -i ./static/css/index.css -o ./static/css/tailwind.css --watch & deno run -A --watch=static/,routes/ dev.ts",
    }
~~~

Run your fresh Project with "deno task run".
Tailwind should now be fully functional. Add a Twailwind class to something in "index.tsx" to see if it workes.

If you installed the typography plugin test it by modifying "index.tsx" like so: 

~~~ tsx
    //index.tsx
    //test if the typography plugin is working
    export default function Home() {
    return (
        <>
        <Head>
            <title>Fresh App</title>
        </Head>
        <div class="p-2 prose">
            <h1>This should be realy big with prose</h1>
            <p>This should have a nice space above it</p>
            <p>This should also have a nice space above it</p>
        </div>
        </>
    );
    }
~~~


## Auto Class Sorting with Prettier
This part is optional for if you want to auto sort tailwind classes with prettier.

If you have not installed Prettier in a previous step do so by running:

~~~ powershell
    npm i -D prettier prettier-plugin-tailwindcss
~~~

Create two files in the root of your project:
".prettierrc.cjs" and ".prettierignore"

Paste the following in ".prettierrc.cjs":

~~~ js
    //prettierrc.cjs
    //only used during development
    /** @type {import("npm:prettier").Options} */
    module.exports = {
        tabWidth: 2,
        useTabs: false,
        plugins: ["./node_modules/prettier-plugin-tailwindcss/dist/index.js"],
    };
~~~

Next go to File>Preferences>Settings
I reccomend you change from User to Workspace settings as to not apply the following changes globally.

Search for "default formatter" and select "Prettier - Code Formatter" in the dropdown.
Then search for "Format On Save" and check the checkbox.

Close and restart VS Code, and run Fresh.
Auto Class Sorting should now be in effect.


